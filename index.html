<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="CaldaSpace - Professional space exploration dashboard with revolutionary features">
  <title>CaldaSpace - Professional Space Dashboard</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body>
  <header>
    <div class="container">
      <div class="header-content">
        <div class="branding">
          <h1>🚀 CaldaSpace</h1>
          <p class="subtitle">Professional space exploration dashboard with AI-powered features and real-time data</p>
        </div>
        <div class="theme-toggle">
          <label class="switch">
            <input type="checkbox" id="themeToggle">
            <span class="slider"></span>
          </label>
          <span id="themeLabel">Light</span>
        </div>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- API Configuration -->
    <section class="api-key-section">
      <div class="section-header">
        <h2 class="section-title">
          <span>🔑</span>
          NASA API Configuration
        </h2>
      </div>
      <p class="section-description">
        Get your free NASA API key at <a href="https://api.nasa.gov/" target="_blank">api.nasa.gov</a> for unlimited access to space data.
      </p>
      <div class="form-row">
        <div class="form-group">
          <input type="text" id="apiKeyInput" class="form-input" placeholder="Enter your NASA API key (or use DEMO_KEY)">
        </div>
        <button id="saveApiKey" class="btn btn-primary">Save Key</button>
        <button id="testApiKey" class="btn btn-secondary">Test Connection</button>
      </div>
      <div id="apiStatus" class="api-status"></div>
    </section>

    <!-- Revolutionary Features Alert -->
    <section class="alert-banner">
      <h2 class="alert-title">🌟 Revolutionary Features Now Available!</h2>
      <p>Experience the future of space exploration with interactive games, 3D visualization, and real-time tracking</p>
    </section>

    <!-- Latest Space News -->
    <section class="content-section">
      <div class="section-header">
        <h2 class="section-title">
          <span>📰</span>
          Latest Space News
        </h2>
        <button id="refreshNews" class="btn btn-outline btn-sm">Refresh</button>
      </div>
      <p class="section-description">
        Stay updated with the latest developments in space exploration from NASA and international space agencies.
      </p>
      <div id="newsLoading" class="loading" style="display: none;"></div>
      <div id="newsContent"></div>
    </section>

    <!-- Dashboard Navigation -->
    <nav class="dashboard-tabs">
      <button class="tab-btn active" data-tab="apod">
        <span>🌌</span>
        Picture of the Day
      </button>
      <button class="tab-btn" data-tab="exoplanet-game">
        <span>🎮</span>
        Exoplanet Game
      </button>
      <button class="tab-btn" data-tab="mars-3d">
        <span>🔴</span>
        Mars 3D
      </button>
      <button class="tab-btn" data-tab="launch-optimizer">
        <span>🚀</span>
        Launch Optimizer
      </button>
      <button class="tab-btn" data-tab="comet-tracker">
        <span>☄️</span>
        Comet Tracker
      </button>
      <button class="tab-btn" data-tab="telescopes">
        <span>🔭</span>
        Telescopes
      </button>
    </nav>

    <!-- APOD Tab -->
    <section class="tab-content active" id="apod">
      <div class="content-section">
        <div class="section-header">
          <h2 class="section-title">
            <span>🌌</span>
            Astronomy Picture of the Day
          </h2>
        </div>
        <p class="section-description">
          Discover the cosmos with NASA's daily featured astronomy image, complete with professional explanations.
        </p>
        
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Select Date</label>
            <input type="date" id="apodDate" class="form-input">
          </div>
          <button id="fetchApodDate" class="btn btn-primary">Load APOD</button>
          <button id="randomApod" class="btn btn-secondary">Random Image</button>
        </div>
        
        <div id="apodLoading" class="loading" style="display: none;"></div>
        <div id="apodContent"></div>
      </div>
    </section>

    <!-- Exoplanet Discovery Game -->
    <section class="tab-content" id="exoplanet-game">
      <div class="content-section">
        <div class="section-header">
          <h2 class="section-title">
            <span>🎮</span>
            Exoplanet Discovery Game
          </h2>
        </div>
        <p class="section-description">
          Help discover real exoplanets using actual NASA transit data. Your discoveries contribute to astronomical research!
        </p>
        
        <div class="stats-grid">
          <div class="stat-card">
            <span class="stat-value" id="gameScore">0</span>
            <span class="stat-label">Score</span>
          </div>
          <div class="stat-card">
            <span class="stat-value" id="planetsDiscovered">0</span>
            <span class="stat-label">Planets Found</span>
          </div>
          <div class="stat-card">
            <span class="stat-value" id="accuracyRate">100%</span>
            <span class="stat-label">Accuracy</span>
          </div>
        </div>
        
        <div class="feature-controls">
          <button id="startExoplanetGame" class="btn btn-primary btn-lg">🎮 Start New Round</button>
          <button id="pauseGame" class="btn btn-secondary">Pause</button>
          <button id="exportDiscoveries" class="btn btn-outline">Export Data</button>
        </div>
        
        <div class="canvas-container">
          <canvas id="exoplanetGameCanvas"></canvas>
        </div>
        
        <div id="gameFeedback"></div>
      </div>
    </section>

    <!-- Mars 3D Reconstruction -->
    <section class="tab-content" id="mars-3d">
      <div class="content-section">
        <div class="section-header">
          <h2 class="section-title">
            <span>🔴</span>
            Mars 3D Terrain Reconstruction
          </h2>
        </div>
        <p class="section-description">
          Generate 3D terrain models from multiple Mars rover missions: Perseverance, Curiosity, and more.
        </p>
        
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Mission/Rover</label>
            <select id="marsRoverSelect" class="form-select">
              <option value="perseverance">Perseverance (Jezero Crater)</option>
              <option value="curiosity">Curiosity (Gale Crater)</option>
              <option value="opportunity">Opportunity (Meridiani)</option>
              <option value="spirit">Spirit (Gusev Crater)</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Terrain Region</label>
            <select id="terrainRegion" class="form-select">
              <option value="jezero">Jezero Crater</option>
              <option value="gale">Gale Crater</option>
              <option value="meridiani">Meridiani Planum</option>
            </select>
          </div>
        </div>
        
        <div class="feature-controls">
          <button id="generateTerrain" class="btn btn-primary btn-lg">🔄 Generate 3D Terrain</button>
          <button id="fetchMarsWeather" class="btn btn-secondary">🌡️ Mars Weather</button>
          <button id="exportTerrainModel" class="btn btn-outline">💾 Export Model</button>
        </div>
        
        <div class="canvas-container">
          <canvas id="mars3DCanvas"></canvas>
        </div>
        
        <div id="terrainAnalysis"></div>
        <div id="mars3DLoading" class="loading" style="display: none;"></div>
      </div>
    </section>

    <!-- Launch Window Optimizer -->
    <section class="tab-content" id="launch-optimizer">
      <div class="content-section">
        <div class="section-header">
          <h2 class="section-title">
            <span>🚀</span>
            Launch Window Optimizer
          </h2>
        </div>
        <p class="section-description">
          Calculate optimal launch windows for any destination in the solar system using real orbital mechanics.
        </p>
        
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Destination</label>
            <select id="launchDestination" class="form-select">
              <option value="mars">Mars</option>
              <option value="jupiter">Jupiter</option>
              <option value="saturn">Saturn</option>
              <option value="europa">Europa</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Launch Vehicle</label>
            <select id="launchVehicle" class="form-select">
              <option value="falcon-heavy">Falcon Heavy</option>
              <option value="sls">SLS</option>
              <option value="starship">Starship</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Payload Mass (kg)</label>
            <input type="number" id="payloadMass" class="form-input" value="1000" min="100" max="100000">
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Start Date</label>
            <input type="date" id="launchStartDate" class="form-input">
          </div>
          <div class="form-group">
            <label class="form-label">End Date</label>
            <input type="date" id="launchEndDate" class="form-input">
          </div>
        </div>
        
        <div class="feature-controls">
          <button id="calculateLaunchWindows" class="btn btn-primary btn-lg">📊 Calculate Windows</button>
          <button id="exportLaunchData" class="btn btn-outline">💾 Export Results</button>
        </div>
        
        <div id="launchLoading" class="loading" style="display: none;"></div>
        <div id="launchSummary"></div>
        <div id="optimalWindows"></div>
      </div>
    </section>

    <!-- Comet Tracker -->
    <section class="tab-content" id="comet-tracker">
      <div class="content-section">
        <div class="section-header">
          <h2 class="section-title">
            <span>☄️</span>
            Comet 3I/Atlas Tracker
          </h2>
        </div>
        <p class="section-description">
          Track the interstellar comet 3I/Atlas in real-time with observation planning for amateur astronomers.
        </p>
        
        <div class="stats-grid">
          <div class="stat-card">
            <span class="stat-value" id="cometEarthDistance">Loading...</span>
            <span class="stat-label">Distance from Earth</span>
          </div>
          <div class="stat-card">
            <span class="stat-value" id="cometSunDistance">Loading...</span>
            <span class="stat-label">Distance from Sun</span>
          </div>
          <div class="stat-card">
            <span class="stat-value" id="cometMagnitude">Loading...</span>
            <span class="stat-label">Magnitude</span>
          </div>
          <div class="stat-card">
            <span class="stat-value" id="cometActivity">Loading...</span>
            <span class="stat-label">Activity Level</span>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Observer Location</label>
            <select id="observerLocation" class="form-select">
              <option value="stockholm">Stockholm, Sweden</option>
              <option value="mauna-kea">Mauna Kea, Hawaii</option>
              <option value="paranal">Cerro Paranal, Chile</option>
            </select>
          </div>
        </div>
        
        <div class="feature-controls">
          <button id="initializeTracking" class="btn btn-primary btn-lg">🔄 Initialize Tracking</button>
          <button id="generateObservationPlan" class="btn btn-secondary">🔭 Observation Plan</button>
          <button id="exportEphemeris" class="btn btn-outline">📊 Export Ephemeris</button>
        </div>
        
        <div class="canvas-container">
          <canvas id="cometTrajectoryCanvas"></canvas>
        </div>
        
        <div class="feature-card">
          <h4>Next Observation Opportunities</h4>
          <div id="observationWindowsList">
            <p>Initialize tracking to see observation windows...</p>
          </div>
        </div>
        
        <div id="cometLoading" class="loading" style="display: none;"></div>
      </div>
    </section>

    <!-- Telescopes -->
    <section class="tab-content" id="telescopes">
      <div class="content-section">
        <div class="section-header">
          <h2 class="section-title">
            <span>🔭</span>
            Professional Telescope Archive
          </h2>
          <button id="fetchTelescopeImages" class="btn btn-outline btn-sm">Load Images</button>
        </div>
        <p class="section-description">
          Access imagery from NASA's space telescopes including JWST, Hubble, TESS, and more professional observatories.
        </p>
        
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Telescope/Mission</label>
            <select id="telescopeSelect" class="form-select">
              <option value="HST">Hubble Space Telescope</option>
              <option value="JWST">James Webb Space Telescope</option>
              <option value="TESS">TESS</option>
              <option value="KEPLER">Kepler</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">View Mode</label>
            <select id="viewMode" class="form-select">
              <option value="gallery">Gallery View</option>
              <option value="timeline">Timeline View</option>
            </select>
          </div>
        </div>
        
        <div id="telescopeLoading" class="loading" style="display: none;"></div>
        <div id="telescopeContent"></div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      <p>© 2025 CaldaSpace | Professional Space Exploration Dashboard</p>
      <p>Real-time data from NASA, ESA, and international space agencies</p>
    </div>
  </footer>

  <!-- Image Preview Modal -->
  <div class="modal" id="mastModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title" id="modalTitle">Space Image</h3>
        <button class="close-modal" id="closeModal">×</button>
      </div>
      <div class="modal-body">
        <img id="previewImage" src="" alt="" style="width: 100%; height: auto; border-radius: 8px;">
      </div>
    </div>
  </div>

  <script src="js/app.js"></script>
  <script>
    // Theme toggle functionality
    (() => {
      const toggle = document.getElementById('themeToggle');
      const label = document.getElementById('themeLabel');
      const saved = localStorage.getItem('caldaspace_theme') || 'light';
      
      document.documentElement.setAttribute('data-theme', saved);
      if (saved === 'dark') {
        toggle.checked = true;
        label.textContent = 'Dark';
      }
      
      toggle?.addEventListener('change', () => {
        const theme = toggle.checked ? 'dark' : 'light';
        document.documentElement.setAttribute('data-theme', theme);
        label.textContent = toggle.checked ? 'Dark' : 'Light';
        localStorage.setItem('caldaspace_theme', theme);
      });
    })();

    // Add some nice CSS animations
    const style = document.createElement('style');
    style.textContent = `
      @keyframes slideIn {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
      }
      
      .success-message, .error-message {
        padding: 1rem;
        border-radius: 8px;
        font-weight: 500;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      }
      
      .success-message {
        background: #d1fae5;
        color: #059669;
        border: 1px solid #059669;
      }
      
      .error-message {
        background: #fee2e2;
        color: #dc2626;
        border: 1px solid #dc2626;
      }
    `;
    document.head.appendChild(style);
  </script>
</body>
</html>